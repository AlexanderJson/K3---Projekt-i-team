/* ==========================================================================
    1. GLOBAL BASE STYLES & VARIABLES
   ========================================================================== */
:root {
    --bg-main: #0a0a0c;
    --bg-card: #141417;
    --bg-element: #1c1c21;
    --text-main: #ffffff;
    --text-dim: #a0a0a5;
    --accent-cyan: #22d3ee;
    --border: rgba(255, 255, 255, 0.1);
}

* { 
    margin: 0; 
    padding: 0; 
    box-sizing: border-box; 
}

body { 
    font-family: 'Share Tech Mono', monospace; 
    background: var(--bg-main); 
    color: var(--text-main); 
    overflow-x: hidden;
}

/* ==========================================================================
    2. SIDOMENY: DESKTOP-LOGIK (Skärmar >= 1024px)
   ========================================================================== */
@media (min-width: 1024px) {
    .menu {
        width: 260px;
        height: 100vh;
        position: fixed;
        left: 0;
        top: 0;
        background: var(--bg-card);
        border-right: 6px double var(--border);
        transition: width 0.1s ease-in-out;
        display: flex;
        flex-direction: column;
        z-index: 1000;
        overflow: visible; 
    }

    .menu-main {
        display: flex;
        flex-direction: column;
        gap: 24px;
        padding: 0 12px;
    }

    .menu-brand {
        padding: 40px 16px 30px 16px; 
        margin-bottom: 90px; 
        display: flex;
        align-items: center; 
        justify-content: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    /* Kollapsat läge för desktop */
    .menu.collapsed { width: 58px; }

    /* Tar bort padding i collapsed så barnen kan centras perfekt */
    .menu.collapsed .menu-main {
        padding: 0 !important;
    }
    
    .menu.collapsed .menu-brand {
        padding: 60px 0 40px 0; 
        margin-bottom: 60px !important; 
        border-bottom: none;
        justify-content: center;
        flex-direction: column;
    }

    .menu.collapsed .menu-brand .nav-text { display: none !important; }

    /* Tooltip vid hovring i stängt läge */
    .menu.collapsed .menu-btn .nav-text {
        position: absolute;
        left: 50px;
        background: var(--bg-card);
        color: var(--text-main);
        padding: 8px 12px;
        border-radius: 6px;
        border: 1px solid var(--border);
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        top: 50%;
        transform: translateY(-50%);
        transition: all 0.2s ease;
        display: block !important;
    }
    .menu.collapsed .menu-btn:hover .nav-text {
        opacity: 1;
        left: 55px;
    }

    /* Centrerar ALLA knappar (inklusive Add Task) i collapsed läge */
    .menu.collapsed .menu-btn,
    .menu.collapsed .addTaskFab {
        justify-content: center !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
        width: 100%;
    }


    .menu.collapsed .addTaskFab .nav-icon {
        margin: 0 !important;
        min-width: 0 !important;
    }   

    .addTaskFab {
    display: flex;
    align-items: center;
    transition: all 0.2s ease-in-out;
    }
}

/* ==========================================================================
    3. SIDOMENY: MOBIL-LOGIK (Flytande bottenmeny < 1024px)
   ========================================================================== */
@media (max-width: 1023px) {
    .menu {
        width: 94% !important;
        max-width: 600px;
        height: 75px !important;
        position: fixed !important;
        top: auto !important; 
        bottom: 15px !important; 
        left: 50% !important;
        transform: translateX(-50%) !important;
        flex-direction: row !important;
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        background: rgba(15, 15, 20, 0.95) !important;
        backdrop-filter: blur(20px);
        z-index: 9999;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        padding: 0 10px;
    }

    .menu-main {
        display: flex !important;
        flex-direction: row !important;
        align-items: center !important; /* Fixar vertikal linjering */
        justify-content: space-around !important;
        width: 100%;
        height: 100%;
        gap: 0 !important;
    }

    .menu-btn {
        padding: 0 !important;
        margin: 0 !important;
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        background: transparent !important;
    }

    /* Döljer texterna helt på mobil för ren look */
    .menu-btn .nav-text {
        display: none !important;
    }

    /* Döljer desktop-element på mobil */
    .menu-brand, .menu-toggle-btn, .menu-footer {
        display: none !important;
    }
}

/* ==========================================================================
    4. GEMENSAM STYLING (IKONER & SETTINGS)
   ========================================================================== */
.menu-btn {
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: 'Share Tech Mono', monospace;
    font-size: 1.4rem;
    font-weight: 500;
    transition: all 0.2s ease;
    border: none;
    background: none;
    cursor: pointer;
    color: var(--text-dim);
    border-radius: 8px;
    text-decoration: none;
    position: relative;
}

.menu-btn:hover {
    color: var(--text-main);
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.3); /* Mjuk glöd vid hovring */
}

.nav-icon {
    font-size: 1.6rem;
    min-width: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Speciell styling för branding-texten (Desktop) */
.menu-brand .nav-text {
    font-size: 1.4rem;
    font-weight: 900;
    letter-spacing: 1.5px;
    color: #ffffff;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.8), 0 0 15px rgba(255, 255, 255, 0.4);
    text-transform: uppercase;
}

/* ==========================================================================
   SETTINGS - NO-SCROLL LAPTOP OPTIMIZATION (1600px Max)
   ========================================================================== */

.settings-wrapper {
    max-width: 1400px; /* Något smalare för bättre fokus på laptop */
    width: 90%;
    /* Maximerar höjden till exakt vad som får plats på skärmen */
    height: 85vh; 
    margin: 3vh auto;
    padding: 3vh 50px;
    
    background: rgba(255, 255, 255, 0.02);
    border-radius: 30px;
    border: 1px solid var(--border);
    backdrop-filter: blur(20px);
    box-shadow: 0 40px 100px rgba(0, 0, 0, 0.5);

    /* Flex-kontroll för att hålla footern på plats */
    display: flex;
    flex-direction: column;
    overflow: hidden; 
}

/* --- RUBRIK --- */
.settings-main-title {
    font-family: 'Share Tech Mono', monospace;
    font-size: clamp(1.5rem, 4vh, 2.2rem); /* Skalar texten efter höjd */
    letter-spacing: 10px;
    margin-bottom: 2vh;
    text-transform: uppercase;
    color: var(--text-main);
}

/* --- SEKTIONER --- */
.settings-section {
    background: rgba(255, 255, 255, 0.03);
    padding: 2.5vh 35px; /* Tightare padding för att spara plats */
    border-radius: 20px;
    margin-bottom: 2.5vh;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.meta-label {
    display: block;
    color: var(--accent-cyan);
    font-size: 0.75rem;
    letter-spacing: 2px;
    margin-bottom: 12px;
    text-transform: uppercase;
}

/* --- MEDLEMSLISTA MED INRE SCROLL --- */
/* Detta är nyckeln: listan kan skrolla, men sidan står stilla */
.members-container-scroll {
    max-height: 35vh; /* Begränsar höjden så footern alltid syns */
    overflow-y: auto;
    padding-right: 15px;
    margin-bottom: 15px;
}

/* Snyggare scrollbar för att matcha temat */
.members-container-scroll::-webkit-scrollbar {
    width: 6px;
}
.members-container-scroll::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
}

/* --- RADER & INPUTS --- */
/* Ta bort webbläsarens standard-markering och använd din egen */
.member-edit-input:focus, 
.premium-input:focus,
.main-input:focus {
    outline: none !important;
    border: 1px solid var(--accent-cyan) !important;
    box-shadow: 0 0 10px rgba(34, 211, 238, 0.3);
}

/* Säkerställ att nya rader ser exakt likadana ut som gamla */
.member-row input {
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(0, 0, 0, 0.2);
    transition: all 0.2s ease;
}

/* Säkerställ att den tomma inputen har samma grundstil som de andra */
.member-edit-input {
    border: 1px solid var(--border);
    background: rgba(0, 0, 0, 0.25);
    transition: all 0.2s ease;
}

.settings-input, .premium-input {
    flex: 1;
    background: rgba(0, 0, 0, 0.25);
    border: 1px solid var(--border);
    padding: 12px 18px;
    border-radius: 10px;
    color: #fff;
    font-size: 1rem;
    transition: border 0.2s;
}

.settings-input:focus {
    border-color: var(--accent-cyan);
    outline: none;
}

/* --- KNAPPAR --- */
.settings-btn {
    font-family: 'Share Tech Mono', monospace;
    font-weight: 800;
    cursor: pointer;
    border-radius: 10px;
    border: none;
    transition: all 0.2s ease;
    text-transform: uppercase;
    white-space: nowrap;
}

.btn-delete-small {
    padding: 10px 20px;
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.2);
    font-size: 0.8rem;
}

.btn-delete-small:hover {
    background: #ef4444;
    color: #fff;
}

/* Lägg till-knappen (Ljus och tydlig) */
.btn-add-full {
    width: 100%;
    padding: 15px;
    background: #f8f9fa;
    color: #000;
    margin-top: 5px;
}

/* --- FOOTER (Spara/Avbryt) --- */
.settings-footer {
    margin-top: auto; /* Trycker ner footern till botten */
    display: flex;
    gap: 20px;
    padding-top: 2vh;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
}

.btn-save-main {
    flex: 2;
    padding: 20px;
    background: #22c55e;
    color: white;
    font-size: 1.1rem;
    box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
}

.btn-cancel-main {
    flex: 1;
    padding: 20px;
    background: rgba(255, 255, 255, 0.9);
    color: #000;
    font-size: 1.1rem;
}

.btn-save-main:hover, .btn-cancel-main:hover {
    transform: translateY(-2px);
    filter: brightness(1.1);
}




/* Styling för den snygga cirkel-ikonen */
.addTaskFab .nav-icon.material-symbols-rounded {
    font-size: 2.6rem !important; /* Gör den lite större så cirkeln syns tydligt */
    color: var(--accent-cyan) !important;
    /* 'FILL' 0 ger en snygg kontur som på din bild */
    font-variation-settings: 'FILL' 0, 'wght' 300, 'grad' 0, 'opsz' 24;
    filter: drop-shadow(0 0 8px rgba(34, 211, 238, 0.4));
    transition: all 0.3s ease;
}

/* Hover-effekt: cirkeln lyser upp och växer */
.addTaskFab:hover .nav-icon.material-symbols-rounded {
    transform: scale(1.1);
    filter: drop-shadow(0 0 15px rgba(34, 211, 238, 0.8));
    color: #ffffff !important;
}

/* Säkerställ att texten bredvid fortfarande ligger rakt */
.addTaskFab {
    display: flex;
    align-items: center;
    gap: 12px;
}

.addTaskFab .nav-text {
    font-size: 1.4rem;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Dölj texten i utfällt läge för addTaskFab om du bara vill ha ikonen där */
.menu:not(.collapsed) .addTaskFab .nav-text {
    display: none;
}

/* Visa som tooltip vid hover i stängt läge (ärvs från din befintliga tooltip-logik) */
.menu.collapsed .addTaskFab:hover .nav-text {
    opacity: 1;
    left: 55px;
}